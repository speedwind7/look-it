(function(){var t={46700:function(t,e,s){var a={"./af":72398,"./af.js":72398,"./ar":44207,"./ar-dz":33382,"./ar-dz.js":33382,"./ar-kw":96525,"./ar-kw.js":96525,"./ar-ly":17098,"./ar-ly.js":17098,"./ar-ma":56483,"./ar-ma.js":56483,"./ar-sa":73961,"./ar-sa.js":73961,"./ar-tn":27401,"./ar-tn.js":27401,"./ar.js":44207,"./az":70903,"./az.js":70903,"./be":41174,"./be.js":41174,"./bg":94615,"./bg.js":94615,"./bm":20225,"./bm.js":20225,"./bn":69751,"./bn-bd":30544,"./bn-bd.js":30544,"./bn.js":69751,"./bo":46894,"./bo.js":46894,"./br":38566,"./br.js":38566,"./bs":40959,"./bs.js":40959,"./ca":52683,"./ca.js":52683,"./cs":14231,"./cs.js":14231,"./cv":999,"./cv.js":999,"./cy":64302,"./cy.js":64302,"./da":63601,"./da.js":63601,"./de":95509,"./de-at":42479,"./de-at.js":42479,"./de-ch":95948,"./de-ch.js":95948,"./de.js":95509,"./dv":19838,"./dv.js":19838,"./el":55113,"./el.js":55113,"./en-au":27377,"./en-au.js":27377,"./en-ca":29626,"./en-ca.js":29626,"./en-gb":55912,"./en-gb.js":55912,"./en-ie":12931,"./en-ie.js":12931,"./en-il":52243,"./en-il.js":52243,"./en-in":9779,"./en-in.js":9779,"./en-nz":49813,"./en-nz.js":49813,"./en-sg":54318,"./en-sg.js":54318,"./eo":74957,"./eo.js":74957,"./es":99243,"./es-do":67409,"./es-do.js":67409,"./es-mx":75188,"./es-mx.js":75188,"./es-us":16927,"./es-us.js":16927,"./es.js":99243,"./et":87731,"./et.js":87731,"./eu":21072,"./eu.js":21072,"./fa":29462,"./fa.js":29462,"./fi":29838,"./fi.js":29838,"./fil":73626,"./fil.js":73626,"./fo":6421,"./fo.js":6421,"./fr":70974,"./fr-ca":77780,"./fr-ca.js":77780,"./fr-ch":59719,"./fr-ch.js":59719,"./fr.js":70974,"./fy":98373,"./fy.js":98373,"./ga":83861,"./ga.js":83861,"./gd":44896,"./gd.js":44896,"./gl":20739,"./gl.js":20739,"./gom-deva":86737,"./gom-deva.js":86737,"./gom-latn":31979,"./gom-latn.js":31979,"./gu":32001,"./gu.js":32001,"./he":99671,"./he.js":99671,"./hi":82038,"./hi.js":82038,"./hr":11228,"./hr.js":11228,"./hu":30087,"./hu.js":30087,"./hy-am":83569,"./hy-am.js":83569,"./id":91977,"./id.js":91977,"./is":86853,"./is.js":86853,"./it":82140,"./it-ch":25626,"./it-ch.js":25626,"./it.js":82140,"./ja":24123,"./ja.js":24123,"./jv":26457,"./jv.js":26457,"./ka":30638,"./ka.js":30638,"./kk":16823,"./kk.js":16823,"./km":9493,"./km.js":9493,"./kn":11288,"./kn.js":11288,"./ko":29663,"./ko.js":29663,"./ku":70805,"./ku.js":70805,"./ky":87550,"./ky.js":87550,"./lb":76272,"./lb.js":76272,"./lo":99135,"./lo.js":99135,"./lt":91452,"./lt.js":91452,"./lv":35782,"./lv.js":35782,"./me":32181,"./me.js":32181,"./mi":50258,"./mi.js":50258,"./mk":35715,"./mk.js":35715,"./ml":50538,"./ml.js":50538,"./mn":83086,"./mn.js":83086,"./mr":75663,"./mr.js":75663,"./ms":35100,"./ms-my":92663,"./ms-my.js":92663,"./ms.js":35100,"./mt":50880,"./mt.js":50880,"./my":19099,"./my.js":19099,"./nb":38709,"./nb.js":38709,"./ne":32201,"./ne.js":32201,"./nl":21016,"./nl-be":61681,"./nl-be.js":61681,"./nl.js":21016,"./nn":25330,"./nn.js":25330,"./oc-lnc":27132,"./oc-lnc.js":27132,"./pa-in":30251,"./pa-in.js":30251,"./pl":93948,"./pl.js":93948,"./pt":89836,"./pt-br":36421,"./pt-br.js":36421,"./pt.js":89836,"./ro":28443,"./ro.js":28443,"./ru":20004,"./ru.js":20004,"./sd":54510,"./sd.js":54510,"./se":63148,"./se.js":63148,"./si":10542,"./si.js":10542,"./sk":77637,"./sk.js":77637,"./sl":85852,"./sl.js":85852,"./sq":90611,"./sq.js":90611,"./sr":10242,"./sr-cyrl":90302,"./sr-cyrl.js":90302,"./sr.js":10242,"./ss":91367,"./ss.js":91367,"./sv":42927,"./sv.js":42927,"./sw":5240,"./sw.js":5240,"./ta":82692,"./ta.js":82692,"./te":42132,"./te.js":42132,"./tet":88300,"./tet.js":88300,"./tg":37211,"./tg.js":37211,"./th":14050,"./th.js":14050,"./tk":53849,"./tk.js":53849,"./tl-ph":3964,"./tl-ph.js":3964,"./tlh":23650,"./tlh.js":23650,"./tr":44195,"./tr.js":44195,"./tzl":55529,"./tzl.js":55529,"./tzm":17520,"./tzm-latn":60298,"./tzm-latn.js":60298,"./tzm.js":17520,"./ug-cn":84134,"./ug-cn.js":84134,"./uk":95456,"./uk.js":95456,"./ur":15679,"./ur.js":15679,"./uz":89277,"./uz-latn":66446,"./uz-latn.js":66446,"./uz.js":89277,"./vi":53992,"./vi.js":53992,"./x-pseudo":8882,"./x-pseudo.js":8882,"./yo":12899,"./yo.js":12899,"./zh-cn":94017,"./zh-cn.js":94017,"./zh-hk":84831,"./zh-hk.js":84831,"./zh-mo":32881,"./zh-mo.js":32881,"./zh-tw":30057,"./zh-tw.js":30057};function r(t){var e=o(t);return s(e)}function o(t){if(!s.o(a,t)){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}return a[t]}r.keys=function(){return Object.keys(a)},r.resolve=o,t.exports=r,r.id=46700},89671:function(t,e,s){"use strict";var a=s(28935),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("TopNavBar",[a("img",{staticClass:"h-full object-contain",attrs:{slot:"Icon",src:s(66949)},slot:"Icon"})]),a("router-view")],1)},o=[],n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex flex-row justify-start h-20 w-full mb-4"},[s("div",{staticClass:"h-full mx-2"},[t._t("Icon")],2),t.$store.getters.getLoginState?s("div",{staticClass:"flex flex-row justify-between w-full h-full items-end"},[s("a-menu",{attrs:{mode:"horizontal"}},[s("a-menu-item",[s("router-link",{attrs:{to:"/"}},[t._v("主页")])],1),s("a-menu-item",[s("router-link",{attrs:{to:"/about/aaaa"}},[t._v("About")])],1)],1),s("a-menu",{attrs:{mode:"horizontal"}},[s("a-menu-item",[s("router-link",{staticStyle:{color:"black !important"},attrs:{to:"/my"}},[s("a-avatar",{attrs:{size:"large",src:t.$store.getters.getUserAvatat||"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"}}),t._v(" "+t._s(t.$store.getters.getUserName))],1)],1),s("a-menu-item",[s("button",{on:{click:t.quit}},[t._v(" 退出")])])],1)],1):t._e()])},i=[],l={name:"TopNavBar",methods:{onSearch(){},quit(){this.$store.commit("quit"),this.$router.push("/login")}}},u=l,c=s(1001),m=(0,c.Z)(u,n,i,!1,null,null,null),p=m.exports,d={components:{TopNavBar:p}},f=d,h=(0,c.Z)(f,r,o,!1,null,null,null),g=h.exports,v=s(12809),j=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",{staticClass:"text-4xl font-bold ml-3"},[t._v("Look!")]),s("div",{staticStyle:{padding:"20px"}},[s("ContentList"),s("div",{staticClass:"float-right mt-5"},[s("a-button",{staticStyle:{"background-color":"#1890ff !important"},attrs:{type:"primary"}},[s("router-link",{attrs:{to:"/createTopic"}},[t._v("发帖")])],1)],1)],1)])},b=[],y=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("a-list",{attrs:{"item-layout":"vertical",size:"large",pagination:t.pagination,"data-source":t.$store.state.topicList,bordered:!0},scopedSlots:t._u([{key:"renderItem",fn:function(e){return s("a-list-item",{key:"item.title"},[s("a-list-item-meta",{attrs:{description:e.user_name}},[s("router-link",{staticClass:"text-lg",attrs:{slot:"title",to:{name:"content",params:{contentId:e.topic_id}}},slot:"title"},[t._v(t._s(e.title)+" ")])],1),s("div",{staticClass:"flex flex-row justify-between w-full "},[t._v(" "+t._s(e.content)+" "),s("span",[t._v("最新回复："+t._s(t.moment(e.updateAt,"YYYY-MM-DD HH:mm:ss").add(8,"h").fromNow()))])])],1)}}])})},w=[],x=s(17133),_=s.n(x),k={name:"ContentList",data(){return{moment:_(),pagination:{onChange:t=>{},pageSize:10},actions:[{type:"star-o",text:"156"},{type:"like-o",text:"156"},{type:"message",text:"2"}]}}},C=k,L=(0,c.Z)(C,y,w,!1,null,null,null),I=L.exports,$={name:"HomeView",components:{ContentList:I},data(){return{}},methods:{},beforeCreate(){},created(){},beforeMount(){},mounted(){this.$store.dispatch("updataTopicList")}},S=$,N=(0,c.Z)(S,j,b,!1,null,null,null),z=N.exports,P=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("h1",[t._v("建设中...")]),s("PlayVideo",{attrs:{videoPath:t.path}})],1)},U=[],D=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"flex justify-center content-center w-full h-full"},[s("video",{attrs:{src:t.videoPath,controls:"controls"}})])},T=[],q={name:"PlayVideo",props:{videoPath:String}},E=q,O=(0,c.Z)(E,D,T,!1,null,null,null),Z=O.exports,F={components:{PlayVideo:Z},data(){return{path:"http://clips.vorwaerts-gmbh.de/big_buck_bunny.mp4"}},methods:{login(){this.$store.commit("login")}}},M=F,Y=(0,c.Z)(M,P,U,!1,null,null,null),V=Y.exports,A=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:t.titleName()},on:{back:function(){return t.$router.go(-1)}}}),s("a-list",{attrs:{size:"large",pagination:t.pagination,"data-source":t.messageList,bordered:!0},scopedSlots:t._u([{key:"renderItem",fn:function(e){return s("a-list-item",{},[s("a-comment",{attrs:{author:e.user_name}},[s("a-avatar",{attrs:{slot:"avatar",size:64,src:e.avatar||"https://zos.alipayobjects.com/rmsportal/ODTLcjxAfvqbxHnVXCYX.png"},slot:"avatar"}),s("div",{attrs:{slot:"content"},slot:"content"},[s("p",{staticClass:"p-3 text-xl"},[t._v(t._s(e.content))]),t._l(e.files,(function(e){return s("div",{key:e.path||e,staticClass:"p-3"},[!e.type||e.type.match(/image\/*/)?s("img",{attrs:{src:e.path||e}}):t._e(),e.type&&e.type.match(/video\/*/)?s("PlayVideo",{attrs:{videoPath:e.path}}):t._e()],1)}))],2),s("a-tooltip",{attrs:{slot:"datetime",title:t.moment(e.createdAt,"YYYY-MM-DD HH:mm:ss").add(8,"h").format("YYYY-MM-DD HH:mm")},slot:"datetime"},[s("span",[t._v(t._s(t.moment(e.createdAt,"YYYY-MM-DD HH:mm:ss").add(8,"h").fromNow()))])])],1)],1)}}])}),t.visible?s("a-alert",{attrs:{message:"请输入内容",type:"warning",closable:"","after-close":t.handleClose}}):t._e(),s("a-textarea",{attrs:{placeholder:"Controlled autosize","auto-size":{minRows:3,maxRows:5}},model:{value:t.value,callback:function(e){t.value=e},expression:"value"}}),s("UploadImg",{attrs:{fileLength:8,fileList:t.fileList,uploadUrl:t.uploadUrl,handleChange:t.handleChange,label:"上传图片或者视频"}},[t._v(" >")]),s("a-button",{staticClass:"float-right border",on:{click:t.sendMessage}},[t._v("评论 ")])],1)},H=[],B=s(26166),R=s.n(B),X=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"clearfix"},[s("a-upload",{attrs:{action:t.uploadUrl,"list-type":"picture-card","file-list":t.fileList},on:{preview:t.handlePreview,change:t.handleChange}},[t.fileList.length<t.fileLength?s("div",[s("a-icon",{attrs:{type:"plus"}}),s("div",{staticClass:"ant-upload-text"},[t._v(t._s(t.label))])],1):t._e()]),s("a-modal",{attrs:{visible:t.previewVisible,footer:null},on:{cancel:t.handleCancel}},[s("img",{staticStyle:{width:"100%"},attrs:{alt:"example",src:t.previewImage}})])],1)},J=[];function W(t){return new Promise(((e,s)=>{const a=new FileReader;a.readAsDataURL(t),a.onload=()=>e(a.result),a.onerror=t=>s(t)}))}var G={data(){return{previewVisible:!1,previewImage:""}},props:{fileLength:Number,fileList:Array,handleChange:Function,uploadUrl:String,label:String},methods:{async handlePreview(t){t.url||t.preview||(t.preview=await W(t.originFileObj)),this.previewImage=t.url||t.preview,this.previewVisible=!0},handleCancel(){this.previewVisible=!1}}},K=G,Q=(0,c.Z)(K,X,J,!1,null,null,null),tt=Q.exports,et={components:{PlayVideo:Z,UploadImg:tt},props:["title","contentId"],data(){return{moment:_(),uploadUrl:"http://120.53.236.226:3000/uploadFiles",pagination:{onChange:t=>{console.log(t)},pageSize:50},messageList:[],visible:!1,value:"",fileList:[]}},met:{},watch:{$route:function(){console.log("router is change")}},methods:{titleName(){return this.$store.getters.getTitleName(this.$route.params.contentId)},handleChange({fileList:t}){this.fileList=t},handleClose(){this.visible=!1},sendMessage(){if(console.log(this.$store.getters.getUserId),""===this.value&&0===this.fileList.length)return void(this.visible=!0);const t=this.fileList.map((t=>({path:t.response.filePath,type:t.response.type})));R().post("http://120.53.236.226:3000/message/sendMessage",{content:this.value,topicId:this.$route.params.contentId,userId:this.$store.getters.getUserId,fileList:t}).then((t=>{console.log(t),!0===t.data.sendMessage?(this.value="",this.fileList=[],this.getMessage()):alert("评论失败")}))},getMessage(){R().post("http://120.53.236.226:3000/message/getMessage",{topicId:this.$route.params.contentId}).then((t=>{this.messageList=t.data,this.messageList.forEach((t=>{t.files=JSON.parse(t.files)}))}))}},mounted(){this.getMessage()}},st=et,at=(0,c.Z)(st,A,H,!1,null,null,null),rt=at.exports,ot=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"w-full flex flex-col justify-center items-center"},[s("h1",{staticClass:"text-4xl font-bold mb-10"},[t._v("Look!")]),s("a-form",{staticClass:"login-form ",attrs:{id:"components-form-demo-normal-login",form:t.form},on:{submit:t.handleSubmit}},[t.passwordError?s("a-alert",{attrs:{type:"error",message:"账号或密码错误",banner:"",closable:""},on:{close:t.handleClose}}):t._e(),s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["userName",{rules:[{required:!0,message:"Please input your username!"}]}],expression:"[\r\n          'userName',\r\n          { rules: [{ required: true, message: 'Please input your username!' }] },\r\n        ]"}],attrs:{placeholder:"用户名"}},[s("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"user"},slot:"prefix"})],1)],1),s("a-form-item",[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"Please input your Password!"}]}],expression:"[\r\n          'password',\r\n          { rules: [{ required: true, message: 'Please input your Password!' }] },\r\n        ]"}],attrs:{type:"password",placeholder:"Password"}},[s("a-icon",{staticStyle:{color:"rgba(0,0,0,.25)"},attrs:{slot:"prefix",type:"lock"},slot:"prefix"})],1)],1),s("a-form-item",[s("a-checkbox",{directives:[{name:"decorator",rawName:"v-decorator",value:["remember",{valuePropName:"checked",initialValue:!0}],expression:"[\r\n          'remember',\r\n          {\r\n            valuePropName: 'checked',\r\n            initialValue: true,\r\n          },\r\n        ]"}]},[t._v(" 记住我 ")]),s("a",{staticClass:"login-form-forgot",attrs:{href:""}},[t._v(" 忘记密码？ ")]),s("a-button",{staticClass:"login-form-button",attrs:{type:"primary",loading:t.loginInloading,"html-type":"submit"}},[t._v(" 登录 ")]),t._v(" Or "),s("router-link",{staticClass:"text-blue-500",attrs:{to:"/signup"}},[t._v("注册！")])],1)],1)],1)},nt=[],it={data(){return{passwordError:!1,loginInloading:!1}},beforeCreate(){this.form=this.$form.createForm(this,{name:"normal_login"})},methods:{handleClose(){this.passwordError=!1},handleSubmit(t){this.loginInloading=!0,t.preventDefault(),this.form.validateFields(((t,e)=>{t?this.loginInloading=!1:(console.log("Received values of form: ",e),this.login(e))}))},login(t){R().post("http://120.53.236.226:3000/users/login",{user_id:t.userName,password:t.password}).then((e=>{this.loginInloading=!1;const s=e.data;s.login?(this.$store.commit("login",s),this.$router.push("/"),t.remember?localStorage.setItem("userName",JSON.stringify(t)):localStorage.removeItem("userName")):this.passwordError=!0})).catch((function(t){alert(t)}))}},mounted(){const t=JSON.parse(localStorage.getItem("userName"));null!==t&&this.login(t)}},lt=it,ut=(0,c.Z)(lt,ot,nt,!1,null,null,null),ct=ut.exports,mt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"w-2/3 flex flex-col justify-center items-center"},[s("a-form",{attrs:{form:t.form},on:{submit:t.handleSubmit}},[s("a-form-item",t._b({attrs:{label:"账号"}},"a-form-item",t.formItemLayout,!1),[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["account",{rules:[{required:!0,message:"请输入账号"}]}],expression:"[\n          'account',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请输入账号',\n              },\n            ],\n          },\n        ]"}]})],1),s("a-form-item",t._b({attrs:{label:"密码","has-feedback":""}},"a-form-item",t.formItemLayout,!1),[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["password",{rules:[{required:!0,message:"请输入密码"},{min:6,max:15,message:"密码请在6-15位之间"},{validator:t.validateToNextPassword}]}],expression:"[\n          'password',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请输入密码',\n              },\n              {\n                min:6,\n                max:15,\n                message: '密码请在6-15位之间'\n              },\n              {\n                validator: validateToNextPassword,\n              },\n            ],\n          },\n        ]"}],attrs:{type:"password"}})],1),s("a-form-item",t._b({attrs:{label:"确认密码","has-feedback":""}},"a-form-item",t.formItemLayout,!1),[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["confirm",{rules:[{required:!0,message:"请确认密码"},{validator:t.compareToFirstPassword}]}],expression:"[\n          'confirm',\n          {\n            rules: [\n              {\n                required: true,\n                message: '请确认密码',\n              },\n              {\n                validator: compareToFirstPassword,\n              },\n            ],\n          },\n        ]"}],attrs:{type:"password"},on:{blur:t.handleConfirmBlur}})],1),s("a-form-item",t._b({},"a-form-item",t.formItemLayout,!1),[s("span",{attrs:{slot:"label"},slot:"label"},[t._v(" 昵称  "),s("a-tooltip",{attrs:{title:"What do you want others to call you?"}},[s("a-icon",{attrs:{type:"question-circle-o"}})],1)],1),s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["nickname",{rules:[{required:!0,message:"请输入昵称",whitespace:!0}]}],expression:"[\n          'nickname',\n          {\n            rules: [{ required: true, message: '请输入昵称', whitespace: true }],\n          },\n        ]"}]})],1),s("a-form-item",t._b({attrs:{label:"手机号"}},"a-form-item",t.formItemLayout,!1),[s("a-input",{directives:[{name:"decorator",rawName:"v-decorator",value:["phone",{rules:[{required:!0,message:"请输入您的手机号!"}]}],expression:"[\n          'phone',\n          {\n            rules: [{ required: true, message: '请输入您的手机号!' }],\n          },\n        ]"}],staticStyle:{width:"100%"}},[s("a-select",{directives:[{name:"decorator",rawName:"v-decorator",value:["prefix",{initialValue:"86"}],expression:"['prefix', { initialValue: '86' }]"}],staticStyle:{width:"70px"},attrs:{slot:"addonBefore"},slot:"addonBefore"},[s("a-select-option",{attrs:{value:"86"}},[t._v(" +86 ")]),s("a-select-option",{attrs:{value:"87"}},[t._v(" +87 ")])],1)],1)],1),s("a-form-item",t._b({},"a-form-item",t.tailFormItemLayout,!1),[s("a-button",{staticClass:"signup-form-button",attrs:{type:"primary","html-type":"submit"}},[t._v(" 注册 ")]),s("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(){return t.$router.go(-1)}}},[t._v(" 取消 ")])],1)],1)],1)},pt=[],dt=(s(21703),{data(){return{confirmDirty:!1,autoCompleteResult:[],formItemLayout:{labelCol:{xs:{span:24},sm:{span:8}},wrapperCol:{xs:{span:24},sm:{span:16}}},tailFormItemLayout:{wrapperCol:{xs:{span:24,offset:0},sm:{span:16,offset:8}}}}},beforeCreate(){this.form=this.$form.createForm(this,{name:"register"})},methods:{handleSubmit(t){t.preventDefault(),this.form.validateFieldsAndScroll(((t,e)=>{t||(console.log("Received values of form: ",e),this.signUp(e))}))},handleConfirmBlur(t){const e=t.target.value;this.confirmDirty=this.confirmDirty||!!e},compareToFirstPassword(t,e,s){const a=this.form;e&&e!==a.getFieldValue("password")?s(new Error("Two passwords that you enter is inconsistent!")):s()},validateToNextPassword(t,e,s){const a=this.form;e&&this.confirmDirty&&a.validateFields(["confirm"],{force:!0}),s()},signUp(t){R().post("http://120.53.236.226:3000/users/signup",t).then((t=>{const e=t.data;!0===e.cerateUser&&(this.$store.commit("login",e),this.$router.push("/"))}))}}}),ft=dt,ht=(0,c.Z)(ft,mt,pt,!1,null,null,null),gt=ht.exports,vt=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",[s("a-page-header",{staticStyle:{border:"1px solid rgb(235, 237, 240)"},attrs:{title:"创建主题"},on:{back:function(){return t.$router.go(-1)}}}),s("div",{staticClass:"p-6"},[s("a-form",{ref:"ruleForm",attrs:{form:t.form,"label-col":t.labelCol,"wrapper-col":t.wrapperCol,rules:t.rules}},[s("a-form-item",{attrs:{label:"标题"}},[s("a-input",{model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),s("a-form-item",{attrs:{label:"内容"}},[s("a-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),s("a-form-item",{attrs:{"wrapper-col":{span:14,offset:4}}},[s("a-button",{staticStyle:{"background-color":"#1890ff !important"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(" 发帖 ")]),s("a-button",{staticStyle:{"margin-left":"10px"},on:{click:function(){return t.$router.go(-1)}}},[t._v(" 取消 ")])],1)],1)],1)],1)},jt=[],bt={data(){return{labelCol:{span:4},wrapperCol:{span:14},form:{title:"",content:""},rules:{title:[{required:!0,message:"Please input Activity title",trigger:"blur"},{min:3,max:5,message:"Length should be 3 to 5",trigger:"blur"}],content:[{required:!0,message:"Please input Content",trigger:"blur"}]}}},methods:{onSubmit(){R().post("http://120.53.236.226:3000/message/createTopic",{...this.form,userId:this.$store.getters.getUserId}).then((t=>{console.log(t.data),t.data.cerateTopic?this.$router.push("/"):alert("发帖失败，请检查内容是否为空")})).catch((function(t){alert(t)}))}}},yt=bt,wt=(0,c.Z)(yt,vt,jt,!1,null,null,null),xt=wt.exports,_t=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"w-full flex flex-col justify-center items-center"},[s("UploadImg",{attrs:{fileLength:1,label:"上传头像",uploadUrl:t.uploadUrl,fileList:t.fileList,handleChange:t.handleChange}}),s("a-button",{staticStyle:{"background-color":"#1890ff !important"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v(" 更新 ")])],1)},kt=[],Ct={components:{UploadImg:tt},data(){return{uploadUrl:"http://120.53.236.226:3000/uploadAvatar",fileList:[],userName:this.$store.getters.getUserName}},methods:{handleChange({fileList:t}){this.fileList=t},onSubmit(){1!==this.fileList.length?alert("请正确上传头像"):R().post("http://120.53.236.226:3000/users/updataUser",{avatar:this.fileList[0].response.filePath,user_id:this.$store.getters.getUserId}).then((t=>{t.data.update&&this.$store.commit("setUserAvatat",this.fileList[0].response.filePath)})).catch((function(t){alert(t)}))}}},Lt=Ct,It=(0,c.Z)(Lt,_t,kt,!1,null,null,null),$t=It.exports;a.Z.use(v.Z);const St=[{path:"/",name:"home",component:z},{path:"/about/:message",name:"about",component:V},{path:"/content/:contentId",name:"content",props:!0,component:rt},{path:"/login",name:"login",component:ct},{path:"/signup",name:"signup",component:gt},{path:"/createTopic",name:"createTopic",component:xt},{path:"/my",name:"my",component:$t}],Nt=new v.Z({mode:"history",base:"/",routes:St});Nt.beforeEach(((t,e,s)=>{const a=Nt.app.$options.store;"signup"===t.name||"login"===t.name||a.state.isLogin?s():s({name:"login"})}));var zt=Nt,Pt=s(34665);a.Z.use(Pt.ZP);var Ut=new Pt.ZP.Store({state:{isLogin:!1,userData:null,topicList:[]},getters:{getLoginState(t){return t.isLogin},getListData(t){return t.listData},getItemForIndex:t=>e=>t.listData[e],getUserData:t=>t.userData,getUserId:t=>t.userData.user_id,getUserName:t=>t.userData.user_name,getUserAvatat:t=>(console.log(t.userData.avatar),t.userData.avatar),getTitleName:t=>e=>t.topicList.find((t=>t.topic_id===e)).title},mutations:{login(t,e){t.isLogin=!0,console.log(e),t.userData=e},quit(t){t.isLogin=!1,t.userData=null,localStorage.removeItem("userName")},setTopicList(t,e){t.topicList=e.reverse()},setUserAvatat(t,e){t.userData.avatar=e}},actions:{updataTopicList({commit:t}){R().get("http://120.53.236.226:3000/message/getAllTopic").then((e=>{t("setTopicList",e.data)}))}},modules:{}}),Dt=s(93878);s(58526);console.log("production"),console.log("http://120.53.236.226:3000"),a.Z.use(Dt.ZP),a.Z.config.productionTip=!1,"en-US"===navigator.language?_().locale("en"):_().locale("zh-cn"),new a.Z({router:zt,store:Ut,render:t=>t(g)}).$mount("#app")},66949:function(t,e,s){"use strict";t.exports=s.p+"img/logo.ba1ff8f3.png"}},e={};function s(a){var r=e[a];if(void 0!==r)return r.exports;var o=e[a]={id:a,loaded:!1,exports:{}};return t[a].call(o.exports,o,o.exports,s),o.loaded=!0,o.exports}s.m=t,function(){var t=[];s.O=function(e,a,r,o){if(!a){var n=1/0;for(c=0;c<t.length;c++){a=t[c][0],r=t[c][1],o=t[c][2];for(var i=!0,l=0;l<a.length;l++)(!1&o||n>=o)&&Object.keys(s.O).every((function(t){return s.O[t](a[l])}))?a.splice(l--,1):(i=!1,o<n&&(n=o));if(i){t.splice(c--,1);var u=r();void 0!==u&&(e=u)}}return e}o=o||0;for(var c=t.length;c>0&&t[c-1][2]>o;c--)t[c]=t[c-1];t[c]=[a,r,o]}}(),function(){s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,{a:e}),e}}(),function(){s.d=function(t,e){for(var a in e)s.o(e,a)&&!s.o(t,a)&&Object.defineProperty(t,a,{enumerable:!0,get:e[a]})}}(),function(){s.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"===typeof window)return window}}()}(),function(){s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)}}(),function(){s.nmd=function(t){return t.paths=[],t.children||(t.children=[]),t}}(),function(){s.p="/"}(),function(){var t={143:0};s.O.j=function(e){return 0===t[e]};var e=function(e,a){var r,o,n=a[0],i=a[1],l=a[2],u=0;if(n.some((function(e){return 0!==t[e]}))){for(r in i)s.o(i,r)&&(s.m[r]=i[r]);if(l)var c=l(s)}for(e&&e(a);u<n.length;u++)o=n[u],s.o(t,o)&&t[o]&&t[o][0](),t[o]=0;return s.O(c)},a=self["webpackChunklookt_it"]=self["webpackChunklookt_it"]||[];a.forEach(e.bind(null,0)),a.push=e.bind(null,a.push.bind(a))}();var a=s.O(void 0,[998],(function(){return s(89671)}));a=s.O(a)})();
//# sourceMappingURL=app.cc5b64f6.js.map